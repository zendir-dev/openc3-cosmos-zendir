# ---------------------------------------------------------
# Guidance Computer Message (GUIDANCE_COMPUTER) - APID 140
# ---------------------------------------------------------

TELEMETRY ZENDIR GUIDANCE_COMPUTER_XML BIG_ENDIAN "Guidance Computer XML Structure"
  VIRTUAL
  ACCESSOR patch_xml_accessor.py
  APPEND_ITEM TIME 64 FLOAT
    KEY "/GuidanceComputer/Time/text()"
  APPEND_ITEM UTC 1024 STRING
    KEY "/GuidanceComputer/UTC/text()"
  APPEND_ITEM ERROR_X 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorX/text()"
  APPEND_ITEM ERROR_Y 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorY/text()"
  APPEND_ITEM ERROR_Z 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorZ/text()"
  APPEND_ITEM ERROR_DOT_X 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorDotX/text()"
  APPEND_ITEM ERROR_DOT_Y 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorDotY/text()"
  APPEND_ITEM ERROR_DOT_Z 64 FLOAT
    KEY "/GuidanceComputer/Data/ErrorDotZ/text()"
  APPEND_ITEM NAVIGATION_MODE 1024 STRING
    KEY "/GuidanceComputer/Data/NavigationMode/text()"
  APPEND_ITEM POINTING_MODE 1024 STRING
    KEY "/GuidanceComputer/Data/PointingMode/text()"
  APPEND_ITEM CONTROLLER_MODE 1024 STRING
    KEY "/GuidanceComputer/Data/ControllerMode/text()"
  APPEND_ITEM MAPPING_MODE 1024 STRING
    KEY "/GuidanceComputer/Data/MappingMode/text()"

TELEMETRY ZENDIR GUIDANCE_COMPUTER BIG_ENDIAN "Packet that contains guidance computer navigation, pointing, and control state."
  APPEND_ITEM CCSDSVER      3 UINT   "CCSDS packet version number (See CCSDS 133.0-B-1)"
  APPEND_ITEM CCSDSTYPE     1 UINT   "CCSDS packet type (command or telemetry)"
    STATE TLM 0
    STATE CMD 1
  APPEND_ITEM CCSDSSHF      1 UINT   "CCSDS secondary header flag"
    STATE FALSE 0
    STATE TRUE 1
  APPEND_ID_ITEM CCSDSAPID 11 UINT 140 "CCSDS application process id"
  APPEND_ITEM CCSDSSEQFLAGS 2 UINT   "CCSDS sequence flags"
    STATE FIRST 1
    STATE CONT 0
    STATE LAST 2
    STATE NOGROUP 3
  APPEND_ITEM CCSDSSEQCNT  14 UINT   "CCSDS packet sequence count"
    OVERFLOW TRUNCATE
  APPEND_ITEM CCSDSLENGTH  16 UINT   "CCSDS packet data length"
  APPEND_ITEM XML 0 BLOCK "Guidance Computer XML Data"
    READ_CONVERSION hash_read_conversion.py TLM ZENDIR GUIDANCE_COMPUTER_XML
  ITEM TIME 0 0 DERIVED "Guidance computer timestamp (seconds)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR TIME
  ITEM UTC 0 0 DERIVED "UTC timestamp of guidance computer data"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR UTC
  ITEM ERROR_X 0 0 DERIVED "MRP error X"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_X
  ITEM ERROR_Y 0 0 DERIVED "MRP error Y"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_Y
  ITEM ERROR_Z 0 0 DERIVED "MRP error Z"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_Z
  ITEM ERROR_DOT_X 0 0 DERIVED "Angular rate error X (rad/s)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_DOT_X
  ITEM ERROR_DOT_Y 0 0 DERIVED "Angular rate error Y (rad/s)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_DOT_Y
  ITEM ERROR_DOT_Z 0 0 DERIVED "Angular rate error Z (rad/s)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR ERROR_DOT_Z
  ITEM NAVIGATION_MODE 0 0 DERIVED "Navigation mode"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR NAVIGATION_MODE
  ITEM POINTING_MODE 0 0 DERIVED "Pointing mode"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR POINTING_MODE
  ITEM CONTROLLER_MODE 0 0 DERIVED "Controller mode"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR CONTROLLER_MODE
  ITEM MAPPING_MODE 0 0 DERIVED "Mapping mode"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR MAPPING_MODE
  PROCESSOR XMLPROCESSOR hash_processor.py XML