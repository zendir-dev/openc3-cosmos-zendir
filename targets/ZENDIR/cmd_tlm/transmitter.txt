# ---------------------------------------------------------
# Transmitter Message (TRANSMITTER) - APID 100
# ---------------------------------------------------------

TELEMETRY ZENDIR TRANSMITTER_XML BIG_ENDIAN "Transmitter XML Structure"
  VIRTUAL
  ACCESSOR patch_xml_accessor.py
  APPEND_ITEM TIME 64 FLOAT
    KEY "/Transmitter/Time/text()"
  APPEND_ITEM UTC 1024 STRING
    KEY "/Transmitter/UTC/text()"
  APPEND_ITEM RECENT_BYTES 64 FLOAT
    KEY "/Transmitter/Data/RecentBytes/text()"
  APPEND_ITEM TOTAL_BYTES 64 FLOAT
    KEY "/Transmitter/Data/TotalBytes/text()"
  APPEND_ITEM BANDWIDTH 64 FLOAT
    KEY "/Transmitter/Data/Bandwidth/text()"
  APPEND_ITEM FREQUENCY 64 FLOAT
    KEY "/Transmitter/Data/Frequency/text()"
  APPEND_ITEM TRANSMISSION_RATE 64 FLOAT
    KEY "/Transmitter/Data/TransmissionRate/text()"

TELEMETRY ZENDIR TRANSMITTER BIG_ENDIAN "Packet that contains transmitter metrics from the spacecraft."
  APPEND_ITEM CCSDSVER      3 UINT   "CCSDS packet version number (See CCSDS 133.0-B-1)"
  APPEND_ITEM CCSDSTYPE     1 UINT   "CCSDS packet type (command or telemetry)"
    STATE TLM 0
    STATE CMD 1
  APPEND_ITEM CCSDSSHF      1 UINT   "CCSDS secondary header flag"
    STATE FALSE 0
    STATE TRUE 1
  APPEND_ID_ITEM CCSDSAPID 11 UINT 100 "CCSDS application process id"
  APPEND_ITEM CCSDSSEQFLAGS 2 UINT   "CCSDS sequence flags"
    STATE FIRST 1
    STATE CONT 0
    STATE LAST 2
    STATE NOGROUP 3
  APPEND_ITEM CCSDSSEQCNT  14 UINT   "CCSDS packet sequence count"
    OVERFLOW TRUNCATE
  APPEND_ITEM CCSDSLENGTH  16 UINT   "CCSDS packet data length"
  APPEND_ITEM XML 0 BLOCK "Transmitter XML Data"
    READ_CONVERSION hash_read_conversion.py TLM ZENDIR TRANSMITTER_XML
  ITEM TIME 0 0 DERIVED "Transmitter metric timestamp (seconds)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR TIME
  ITEM UTC 0 0 DERIVED "The UTC timestamp of the data"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR UTC
  ITEM RECENT_BYTES 0 0 DERIVED "Most recent interval transmitted bytes"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR RECENT_BYTES
  ITEM TOTAL_BYTES 0 0 DERIVED "Total transmitted bytes"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR TOTAL_BYTES
  ITEM BANDWIDTH 0 0 DERIVED "Instantaneous bandwidth usage (Hz)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR BANDWIDTH
  ITEM FREQUENCY 0 0 DERIVED "Transmit center frequency (Hz)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR FREQUENCY
  ITEM TRANSMISSION_RATE 0 0 DERIVED "Data transmission rate (bps)"
    READ_CONVERSION openc3/conversions/processor_conversion.py XMLPROCESSOR TRANSMISSION_RATE
  PROCESSOR XMLPROCESSOR hash_processor.py XML